---
author: alc
category:
  - sitecore
  - sitecore-8
  - speak
date: "2015-02-06T12:40:52+00:00"
draft: "true"
guid: http://laubplusco.net/?p=1420
title: How to list MongoDB content in a custom SPEAK component in Sitecore 8
url: /

---
Following my post on how to get and set data in [MongoDB using WebApi in Sitecore 8](/working-custom-mongodb-collections-sitecore-8-using-webapi/ "Working with custom MongoDB collections in Sitecore 8 using WebApi"), I will now show how this data can be shown in a custom SPEAK component.

Even though a lot has changed in SPEAK 1.2 that ships with Sitecore 8 then please start out with reading my [introduction to SPEAK components](/introducing-sitecore-speak-components-some-basics/ "Part 1: Introducing Sitecore SPEAK Components") if you want a SPEAK 1-0-1 introduction and haven't read it already. Just ignore the code examples since these are no longer valid even though they still work. Everything has become simpler in SPEAK 1.2 so when you have read the basic introduction of components you are all set for reading about the [goodies introduced in SPEAK 1.2 compared to SPEAK 1.1](/sitecore-speak-v1-2-goodies/ "Sitecore SPEAK v1.2 goodies")

## Creating the SPEAK component

We start out with creating the SPEAK component itself. We just want a really basic one as example.

First we create a Visual Studio C# Web Project and [reference the dll's needed for SPEAK](/setting-sitecore-speak-project-visual-studio/ "Setting up a Sitecore SPEAK project in Visual Studio") from the bin folder and delete the web.config that is generated with the project.

_Remember that you need Sitecore Rocks for developing SPEAK applications._

Then we associate the Visual Studio project with the Sitecore instance:

This is done by right clicking the project in Visual Studio -> Sitecore -> Project Properties

![Rocks_associate_with_sitecore](/wp-content/uploads/2015/02/Rocks_associate_with_sitecore.png)

Now we need to create a SPEAK application in the core database.

![mongo_list_speak_application](/wp-content/uploads/2015/02/mongo_list_speak_application.png)

The MongoList item is just a common folder: Then I've created a Speak-StartPage item that I called StartPage.

Beneath the StartPage item I've created a PageSettings items. Then I've created a folder called Common in which I've created a Layouts folder and a Speak-RenderingFolder item.

I actually just copied the layouts folder from another SPEAK application and deleted the renderings. This is much quicker than right click -> add -> new item.

_Notice that all SPEAK applications follows the same structure, see the built-in applications as references._

Now we have somewhere to store our view-rendering for our custom SPEAK component. Next thing we need to do is to create the SPEAK component.

To do this we first create a folder that we call the same name as we want our component to be named. For this example I've called it CommentsReview. Then we right click the folder -> Add new item -> Sitecore -> SPEAK 1.2 -> SPEAK Component with Javascript -> Name it and press Add.

![add_speak_component_in_project](/wp-content/uploads/2015/02/add_speak_component_in_project.png)

Rocks now ask us where to place the Rendering item in Sitecore. We select the rendering folder that we created in our MongoList application:

![create_speak_rendering_item_in_sitecore](/wp-content/uploads/2015/02/create_speak_rendering_item_in_sitecore.png)

Now right-click the view-rendering item and select SPEAK -> Create parameters template

![create_speak_parameters_template](/wp-content/uploads/2015/02/create_speak_parameters_template.png)

Now create a section called Data and add a field called CommentsApiUrl in the parameters template:

![speak_parameters_template_comments_review](/wp-content/uploads/2015/02/speak_parameters_template_comments_review.png)

Then right click the view-rendering item again and select SPEAK -> Create typesafe view-model.

![create_typesafe_viewmodel_sitecore_speak_rocks](/wp-content/uploads/2015/02/create_typsafe_viewmodel_sitecore_speak_rocks.png)

This generates a partial file under the CommentsReview.cshtml file in Visual Studio that look like this:

```c#
//------------------------------------------------------------------------------
// <auto-generated>
//     This code was generated by a tool.
//
//     Changes to this file may cause incorrect behavior and will be lost if
//     the code is regenerated.
// </auto-generated>
//------------------------------------------------------------------------------

#pragma warning disable 1591

namespace LaubPlusCo.MongoList.CommentsReview
{
  #region Designer generated code

  [System.Diagnostics.DebuggerStepThroughAttribute()]
  [System.CodeDom.Compiler.GeneratedCodeAttribute("SitecoreRocks", "1.0.0.0")]
  public partial class CommentsReviewRenderingModel : Sitecore.Mvc.Presentation.SpeakRenderingModel
  {
    [System.CodeDom.Compiler.GeneratedCodeAttribute("SitecoreRocks", "1.0.0.0")]
    public string AccessKey { get { return this.GetString("AccessKey"); } }

    [System.CodeDom.Compiler.GeneratedCodeAttribute("SitecoreRocks", "1.0.0.0")]
    public string Behaviors { get { return this.GetString("Behaviors"); } }

    [System.CodeDom.Compiler.GeneratedCodeAttribute("SitecoreRocks", "1.0.0.0")]
    public string CommentsApiUrl { get { return this.GetString("CommentsApiUrl "); } }

    [System.CodeDom.Compiler.GeneratedCodeAttribute("SitecoreRocks", "1.0.0.0")]
    public string Id { get { return this.GetString("Id"); } }

    [System.CodeDom.Compiler.GeneratedCodeAttribute("SitecoreRocks", "1.0.0.0")]
    public bool IsVisible { get { return this.GetBool("IsVisible"); } }

    [System.CodeDom.Compiler.GeneratedCodeAttribute("SitecoreRocks", "1.0.0.0")]
    public string Tooltip { get { return this.GetString("Tooltip"); } }
  }

  #endregion
}

#pragma warning restore 1591

```

You will notice that your view-rendering inherits properties from SPEAK control base. This is actually the Parameters template that inherits from the template called ControlBase. SPEAK ships with a range of base templates for components. Read my previous posts on SPEAK to learn more about this template hierarchy.

There is a small issue in Rocks. You will notice that the generated namespace does not follow the namespace in the solution and that the Model field on the view-rendering item miss an assembly name. The namespace is called the same as your view-rendering item. Change this to your own namespace and then edit the view-rendering item in Rocks:

![model_field_issue](/wp-content/uploads/2015/02/model_field_issue.png)

Change the value of the Model field to **\[YourNamespace\].\[Partial Class Name\], \[YourAssembly\]** _If you do not define an assembly name in the model field then the Sitecore MVC ModelLocator  will attempt to resolve the model as an item path and fail. This is a cute little method called TypeHelper.LooksLikeTypeName that checks if the field contains both a dot and a comma to determine if it is a path or an assembly._

Anyway, now we have the typesafe view model setup and we can now use our fields from the parameters template type safe in our view rendering.

\[VIEW CODE\]

Compared to SPEAK 1.1 this remove a ton of required plumbing code. I was so excited when I learned about this feature some months ago.

The view-rendering now render out the text set on the parameters template and then ..... for the comments.!!!

Final part of the component is of course the important one, the Javascript:

Rocks have created a file called CommentsReview.js with an initialize method.

We create a simple ccccxxxxxxxxxxxxxx and then we hook up

That is it for the component.

## Setting up the SPEAK application

Now we go back and edit the layout of the StartPage in our application and setup the layout

CREATE A START PAGE

SETUP LAYOUT

SETUP PAGECODE

HOOK TOGETHER BUTTON AND CUSTOM COMPONENT

VIEW THE PAGE

As a datasource we use the ApiController and repository from my previous post about [using MongoDB and WebApi in Sitecore 8](/working-custom-mongodb-collections-sitecore-8-using-webapi/ "Working with custom MongoDB collections in Sitecore 8 using WebApi")

Notice that the example shown here is just that, an example, nothing more.

That was it. I think a lot of participants in the Sitecore Hackathon was missing this post during the Hackathon, but hey, better late than never :)

Let me know if you want a Sitecore package with the items and the precompiled code in the comments below then I'll wrap it up and share the link on this page.

_Even though this post is a long one with loads of screenshots, it is really simple to setup a SPEAK application. The code and everything has taken less than 20 minutes to write. To illustrate this I will make a video with the content from this post sometime soon._
